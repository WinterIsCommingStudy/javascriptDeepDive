# 얕은 복사와 깊은 복사에 대해

## 기본형 데이터와 참조형 데이터

### [ 불변값 ]

변수와 상수를 구분하는 성질은 ‘변수 영역 메모리에 대한 변경 가능성’이다. 한 번 데이터 할당이 이뤄진 변수 공간에 다른 데이터를 재할당할 수 있는지 여부가 관건이다. 반면 불변성 여부를 구분할 때의 **변경 가능성의 대상**은 **데이터 영역 메모리**이다. 기본형 데이터는 모두 불변값이다.

```js
var b = 5;
var c = 5;
b = 7;
```

⇒ 기존에 저장된 5자체를 7로 바꾸는 것이 아니라 기존에 저장했던 7을 찾아서 있으면 재활용하고, 없으면 새로 만들어서 b에 저장한다. 결국 5와 7 모두 다른 값으로 변경할 수 없다.

**변경은 새로 만드는 동작을 통해서만 이뤄진다.** 이것이 바로 불변값의 성질이다. 한 번 만들어진 값은 가비지 컬렉팅을 당하지 않는 한 영원히 변하지 않는다.

<br>

### [ 가변값 ]

기본형 데이터와의 차이는 **객체의 변수(프로퍼티) 영역이 별도로 존재**한다는 점이다.

```js
var obj = {
  a: 1,
  b: "mini",
};

obj.a = 2;
```

⇒ 변수 obj가 바라보고 있는 주소는 변하지 않았다. 새로운 객체가 만들어진 것이 아니라 기존의 객체 내부의 값만 바뀐 것이다.

<br>

### [ 변수 복사 비교 ]

동작 방식을 알았으니 이제 본격적으로 기본형 데이터와 참조형 데이터의 차이를 확인해보자!!

변수를 복사할 때의 변화를 살펴보자.

```js
var a = 10;
var b = a;

var obj1 = { c: 10, d: "ddd" };
var obj2 = obj1;
```

변수를 복사하는 과정은 기본형 데이터와 참조형 데이터 모두 같은 주소를 바라보게 되는점에서 동일하다. 복사 과정은 동일하지만 **데이터 할당 과정에서 이미 차이**가 있기 때문에 변수 복사 이후의 동작에도 큰 차이가 발생한다.

```js
b = 15;
obj2.c = 20; //객체의 프로퍼티 변경
```

```js
a !== b;
obj1 === obj2;
```

⇒ 변수 a와 b는 서로 다른 주소를 바라보게 됐으나, 변수 obj1과 obj2는 여전히 같은 객체를 바라보고 있는 상태이다.

이 결과가 바로 기본형과 참조형 데이터의 가장 큰 차이점이다. **기본형은 주솟값을 복사하는 과정이 한 번만 이뤄지고, 참조형은 한 단계를 더 거치게 된다는 차이가 있다는 것**이다.

<br>

객체의 프로퍼티가 아닌 객체 자체를 변경하는 것을 비교해보자!

```js
b = 15;
obj2 = { c: 20, d: "ddd" }; //객체 자체를 변경
```

⇒ 객체에 대한 변경에 값이 달라졌다! 즉, 참조형 데이터가 ‘가변값’이라고 설명할 때의 ‘가변’은 참조형 데이터 자체를 변경할 경우가 아니라 그 **내부의 프로퍼티를 변경할 때만 성립**한다.
